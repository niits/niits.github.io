<!DOCTYPE html>
<html lang="vi">
{{ partial "head.html" . }}
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  {{ partial "page_nav.html" . }}

  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        {{ .Title }}
      </h1>
      <div class="meta">
        {{ if (or (isset .Site "author") (isset .Site "title"))}}
        <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <span itemprop="name">
            {{ if isset .Site "author" }}
              {{ .Site.Author }}
            {{ else if isset .Site "title" }}
              {{ .Site.Title }}
            {{ end }}
          </span>
        </span>
        {{ end }}
        <div class="postdate">
          {{ $dataFormat := .Site.Params.dateFormat | default "2006-01-02" }}
          <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="datePublished">{{ .Date.Format $dataFormat }}</time>
          {{ if (and .Site.Params.show_updated (ne .Lastmod .Date)) }}
            (Cập nhật: <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="dateModified">{{ .Lastmod.Format $dataFormat }}</time>)
          {{ end }}
        </div>
        {{ $showReadTime := .Site.Params.showReadTime | default false }}
        {{if $showReadTime}}
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          {{ $readTime := math.Round (div (countwords .Content) 220.0) }}
          {{ $readTime }} phút đọc
        </div>
        {{ end }}
        {{ if gt .Params.categories 0 }}
        <div class="article-category">
            <i class="fas fa-archive"></i>
            {{ range $index, $value := .Params.categories }}
            {{ if gt $index 0 }} {{ print ", " }} {{ end }}
            <a class="category-link" href="{{ "/categories/" | relLangURL }}{{ $value | urlize }}" itemprop="articleSection">{{ $value }}</a>
            {{ end }}
        </div>
        {{ end }}
        {{ if gt .Params.tags 0 }}
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            {{ range $index, $value := .Params.tags }}
            {{ if gt $index 0 }} {{ print ", " }} {{ end }}
            <a class="tag-link" href="{{ "/tags/" | relLangURL }}{{ $value | urlize }}" rel="tag" itemprop="keywords">{{ $value }}</a>
            {{ end }}
        </div>
        {{ end }}
      </div>
    </header>

    <div class="content" itemprop="articleBody">
      {{ .Content}}
    </div>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": {{ .Title | jsonify }},
      "name": {{ .Title | jsonify }},
      "description": {{ with .Description }}{{ . | jsonify }}{{ else }}{{ .Summary | plainify | jsonify }}{{ end }},
      "inLanguage": "vi",
      "url": {{ .Permalink | jsonify }},
      "datePublished": {{ .Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
      "dateModified": {{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
      "author": {
        "@type": "Person",
        "name": {{ if isset .Site "author" }}{{ .Site.Author | jsonify }}{{ else }}{{ .Site.Title | jsonify }}{{ end }}
      },
      "publisher": {
        "@type": "Organization",
        "name": {{ .Site.Title | jsonify }},
        "url": {{ .Site.BaseURL | jsonify }}
      },
      {{ with .Params.image }}
      "image": {{ . | absURL | jsonify }},
      {{ end }}
      {{ with .Params.categories }}
      "articleSection": {{ index . 0 | jsonify }},
      {{ end }}
      {{ with .Params.tags }}
      "keywords": {{ delimit . ", " | jsonify }},
      {{ end }}
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": {{ .Permalink | jsonify }}
      },
      "wordCount": {{ .WordCount }}
    }
    </script>
  </article>

  {{ partial "page_nav_mobile.html" . }}

  {{ partial "footer.html" . }}

  </div>
</body>

<link rel="stylesheet" href={{ "/lib/font-awesome/css/all.min.css" | relURL }}>
<script src={{ "/lib/jquery/jquery.min.js" | relURL }}></script>
<script src={{ "/js/main.js" | relURL }}></script>
<script src={{ "js/code-copy.js"  | relURL }}></script>
{{ $mathjax := false }}
{{ if isset .Params "mathjax" }}
  {{ $mathjax = .Params.mathjax }}
{{ else if isset .Site.Params "mathjax" }}
  {{ $mathjax = .Site.Params.mathjax }}
{{ end }}
{{ if $mathjax }}
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
{{ end }}
</html>